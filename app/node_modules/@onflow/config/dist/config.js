var n,e=require("@onflow/util-actor"),r="config",t="PUT_CONFIG",o="GET_CONFIG",i="CONFIG/UPDATED",u=function(n){return n},f=((n={})[t]=function(n,e,r){var t=r.key,o=r.value;if(null==t)throw new Error("Missing 'key' for config/put.");n.put(t,o),n.broadcast(i,n.all())},n[o]=function(n,e,r){var t=r.key,o=r.fallback;if(null==t)throw new Error("Missing 'key' for config/get");e.reply(n.get(t,o))},n.UPDATE_CONFIG=function(n,e,r){var t=r.key,o=r.fn;if(null==t)throw new Error("Missing 'key' for config/update");n.update(t,o||u),n.broadcast(i,n.all())},n.DELETE_CONFIG=function(n,e,r){var t=r.key;if(null==t)throw new Error("Missing 'key' for config/delete");n.delete(t),n.broadcast(i,n.all())},n.WHERE_CONFIG=function(n,e,r){var t=r.pattern;if(null==t)throw new Error("Missing 'pattern' for config/where");e.reply(n.where(t))},n[e.SUBSCRIBE]=function(n,e){n.subscribe(e.from),n.send(e.from,i,n.all())},n[e.UNSUBSCRIBE]=function(n,e){n.unsubscribe(e.from)},n);function c(n,o){return e.send(r,t,{key:n,value:o}),d()}function l(n,t){return e.send(r,o,{key:n,fallback:t},{expectReply:!0,timeout:10})}function a(n,t){return void 0===t&&(t=u),e.send(r,"UPDATE_CONFIG",{key:n,fn:t}),d()}function s(n){return e.send(r,"DELETE_CONFIG",{key:n}),d()}function E(n){return e.send(r,"WHERE_CONFIG",{pattern:n},{expectReply:!0,timeout:10})}function p(n){return e.subscriber(r,function(){return e.spawn(f,r)},n)}function d(){return{put:c,get:l,update:a,delete:s,where:E,subscribe:p}}e.spawn(f,r),exports.config=d;
//# sourceMappingURL=config.js.map
