import{spawn as e,SUBSCRIBE as r,UNSUBSCRIBE as n,send as t,subscriber as o}from"@onflow/util-actor";const i="config",u="PUT_CONFIG",l="GET_CONFIG",f="CONFIG/UPDATED",c=e=>e,a={[u]:(e,r,{key:n,value:t})=>{if(null==n)throw new Error("Missing 'key' for config/put.");e.put(n,t),e.broadcast(f,e.all())},[l]:(e,r,{key:n,fallback:t})=>{if(null==n)throw new Error("Missing 'key' for config/get");r.reply(e.get(n,t))},UPDATE_CONFIG:(e,r,{key:n,fn:t})=>{if(null==n)throw new Error("Missing 'key' for config/update");e.update(n,t||c),e.broadcast(f,e.all())},DELETE_CONFIG:(e,r,{key:n})=>{if(null==n)throw new Error("Missing 'key' for config/delete");e.delete(n),e.broadcast(f,e.all())},WHERE_CONFIG:(e,r,{pattern:n})=>{if(null==n)throw new Error("Missing 'pattern' for config/where");r.reply(e.where(n))},[r]:(e,r)=>{e.subscribe(r.from),e.send(r.from,f,e.all())},[n]:(e,r)=>{e.unsubscribe(r.from)}};function s(e,r){return t(i,u,{key:e,value:r}),w()}function E(e,r){return t(i,l,{key:e,fallback:r},{expectReply:!0,timeout:10})}function p(e,r=c){return t(i,"UPDATE_CONFIG",{key:e,fn:r}),w()}function y(e){return t(i,"DELETE_CONFIG",{key:e}),w()}function g(e){return t(i,"WHERE_CONFIG",{pattern:e},{expectReply:!0,timeout:10})}function k(r){return o(i,()=>e(a,i),r)}function w(){return{put:s,get:E,update:p,delete:y,where:g,subscribe:k}}e(a,i);export{w as config};
//# sourceMappingURL=config.modern.js.map
