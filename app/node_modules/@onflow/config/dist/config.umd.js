!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports,require("@onflow/util-actor")):"function"==typeof define&&define.amd?define(["exports","@onflow/util-actor"],n):n((e=e||self).config={},e.utilActor)}(this,function(e,n){var r,t="config",o="PUT_CONFIG",i="GET_CONFIG",f="CONFIG/UPDATED",u=function(e){return e},c=((r={})[o]=function(e,n,r){var t=r.key,o=r.value;if(null==t)throw new Error("Missing 'key' for config/put.");e.put(t,o),e.broadcast(f,e.all())},r[i]=function(e,n,r){var t=r.key,o=r.fallback;if(null==t)throw new Error("Missing 'key' for config/get");n.reply(e.get(t,o))},r.UPDATE_CONFIG=function(e,n,r){var t=r.key,o=r.fn;if(null==t)throw new Error("Missing 'key' for config/update");e.update(t,o||u),e.broadcast(f,e.all())},r.DELETE_CONFIG=function(e,n,r){var t=r.key;if(null==t)throw new Error("Missing 'key' for config/delete");e.delete(t),e.broadcast(f,e.all())},r.WHERE_CONFIG=function(e,n,r){var t=r.pattern;if(null==t)throw new Error("Missing 'pattern' for config/where");n.reply(e.where(t))},r[n.SUBSCRIBE]=function(e,n){e.subscribe(n.from),e.send(n.from,f,e.all())},r[n.UNSUBSCRIBE]=function(e,n){e.unsubscribe(n.from)},r);function l(e,r){return n.send(t,o,{key:e,value:r}),y()}function s(e,r){return n.send(t,i,{key:e,fallback:r},{expectReply:!0,timeout:10})}function a(e,r){return void 0===r&&(r=u),n.send(t,"UPDATE_CONFIG",{key:e,fn:r}),y()}function d(e){return n.send(t,"DELETE_CONFIG",{key:e}),y()}function p(e){return n.send(t,"WHERE_CONFIG",{pattern:e},{expectReply:!0,timeout:10})}function E(e){return n.subscriber(t,function(){return n.spawn(c,t)},e)}function y(){return{put:l,get:s,update:a,delete:d,where:p,subscribe:E}}n.spawn(c,t),e.config=y});
//# sourceMappingURL=config.umd.js.map
