!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.amd?define(["exports"],n):n((e=e||self).encode={})}(this,function(e){var n=require("rlp"),r=function(e,n){return Buffer.from(e.padStart(2*n,0),"hex")},t=function(e){return r(e,8)},o=function(e){return Buffer.from(JSON.stringify(e),"utf8")},c=function(e){return n.encode(e).toString("hex")},u=function(e){return f(e),[(c=e.script,Buffer.from(c,"utf8")),e.arguments.map(o),(n=e.refBlock,r(n,32)),e.gasLimit,t(e.proposalKey.address),e.proposalKey.keyId,e.proposalKey.sequenceNum,t(e.payer),e.authorizers.map(t)];var n,c},a=function(e){var n=i(e);return e.payloadSigs.map(function(e){return{signerIndex:n.get(e.address),keyId:e.keyId,sig:e.sig}}).sort(function(e,n){return e.signerIndex>n.signerIndex?1:e.signerIndex<n.signerIndex?-1:e.keyId>n.keyId?1:e.keyId<n.keyId?-1:void 0}).map(function(e){return[e.signerIndex,e.keyId,(n=e.sig,Buffer.from(n,"hex"))];var n})},i=function(e){var n=new Map,r=0,t=function(e){n.has(e)||(n.set(e,r),r++)};return t(e.proposalKey.address),t(e.payer),e.authorizers.forEach(t),n},f=function(e){y.forEach(function(n){return g(e,n)}),m.forEach(function(n){return g(e.proposalKey,n,"proposalKey")})},s=function(e){return"number"==typeof e},d=function(e){return"string"==typeof e},p=function(e){return null!==e&&"object"==typeof e},l=function(e){return p(e)&&e instanceof Array},y=[{name:"script",check:d},{name:"arguments",check:l},{name:"refBlock",check:d,defaultVal:"0"},{name:"gasLimit",check:s},{name:"proposalKey",check:p},{name:"payer",check:d},{name:"authorizers",check:l}],m=[{name:"address",check:d},{name:"keyId",check:s},{name:"sequenceNum",check:s}],h=[{name:"payloadSigs",check:l}],k=[{name:"address",check:d},{name:"keyId",check:s},{name:"sig",check:d}],g=function(e,n,r,t){var o=n.name,c=n.check,u=n.defaultVal;if(null==e[o]&&null!=u&&(e[o]=u),null==e[o])throw x(o,r,t);if(!c(e[o]))throw v(o,r,t)},I=function(e,n,r){return n?null==r?n+"."+e:n+"."+r+"."+e:e},x=function(e,n,r){return new Error("Missing field "+I(e,n,r))},v=function(e,n,r){return new Error("Invalid field "+I(e,n,r))};e.encodeTransactionEnvelope=function(e){return c(function(e){return function(e){h.forEach(function(n){return g(e,n)}),e.payloadSigs.forEach(function(e,n){k.forEach(function(r){return g(e,r,"payloadSigs",n)})})}(e),[u(e),a(e)]}(e))},e.encodeTransactionPayload=function(e){return c(u(e))}});
//# sourceMappingURL=encode.umd.js.map
