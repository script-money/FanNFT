function n(){return(n=Object.assign||function(n){for(var r=1;r<arguments.length;r++){var e=arguments[r];for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(n[t]=e[t])}return n}).apply(this,arguments)}"undefined"!=typeof Symbol&&(Symbol.iterator||(Symbol.iterator=Symbol("Symbol.iterator"))),"undefined"!=typeof Symbol&&(Symbol.asyncIterator||(Symbol.asyncIterator=Symbol("Symbol.asyncIterator")));var r='{\n  "tag":"UNKNOWN",\n  "assigns":{},\n  "status":"OK",\n  "reason":null,\n  "accounts":{},\n  "params":{},\n  "arguments":{},\n  "message": {\n    "cadence":null,\n    "refBlock":null,\n    "computLimit":null,\n    "proposer":null,\n    "payer":null,\n    "authorizations":[],\n    "params":[],\n    "arguments":[]\n  },\n  "proposer":null,\n  "authorizations":[],\n  "payer":null,\n  "events": {\n    "eventType":null,\n    "start":null,\n    "end":null,\n    "blockIds":[]\n  },\n  "transaction": {\n    "id":null\n  },\n  "block": {\n    "id":null,\n    "height":null,\n    "isSealed":null\n  },\n  "account": {\n    "addr":null\n  }\n}',e=new Set(Object.keys(JSON.parse(r))),t=function(n){return Array.isArray(n)},o=function(n){return null==n},s="abcdefghijklmnopqrstuvwxyz0123456789".split(""),u=function(){return s[~~(Math.random()*s.length)]},a=function(){return Array.from({length:10},u).join("")},i=function(n){if("object"!=typeof n||o(n)||function(n){return"number"===n}(n))return!1;var r=e,t=Array.isArray(r),s=0;for(r=t?r:r[Symbol.iterator]();;){var u;if(t){if(s>=r.length)break;u=r[s++]}else{if((s=r.next()).done)break;u=s.value}if(!n.hasOwnProperty(u))return!1}return!0},l=function(n){return n.status="OK",n},c=function(n){return function(r){return r.tag=n,l(r)}},p=function(r,e){return function(t){return t.accounts[e]=JSON.parse('{\n  "kind":"ACCOUNT",\n  "tempId":null,\n  "addr":null,\n  "keyId":null,\n  "sequenceNum":null,\n  "signature":null,\n  "signingFunction":null,\n  "resolve":null,\n  "role": {\n    "proposer":false,\n    "authorizer":false,\n    "payer":false,\n    "param":false\n  }\n}'),t.accounts[e].tempId=e,t.accounts[e].addr=r.addr,t.accounts[e].keyId=r.keyId,t.accounts[e].sequenceNum=r.sequenceNum,t.accounts[e].signature=r.signature,t.accounts[e].signingFunction=r.signingFunction,t.accounts[e].resolve=r.resolve,t.accounts[e].role=n({},t.accounts[e].role,{},r.role),l(t)}},T=c("UNKNOWN"),m=c("SCRIPT"),f=c("TRANSACTION"),x=c("GET_TRANSACTION_STATUS"),A=c("GET_ACCOUNT"),E=c("GET_EVENTS"),N=c("GET_LATEST_BLOCK"),G=c("GET_BLOCK_BY_ID"),_=c("GET_BLOCK_BY_HEIGHT"),O=c("PING"),y=c("GET_BLOCK"),S=c("GET_BLOCK_HEADER"),d=function(n){return function(r){return r.tag===n}},g=d("UNKNOWN"),k=d("SCRIPT"),C=d("TRANSACTION"),B=d("GET_TRANSACTION_STATUS"),v=d("GET_ACCOUNT"),I=d("GET_EVENTS"),h=d("GET_LATEST_BLOCK"),K=d("GET_BLOCK_BY_ID"),L=d("GET_BLOCK_BY_HEIGHT"),P=d("PING"),R=d("GET_BLOCK"),U=d("GET_BLOCK_HEADER"),b=function(n){return"BAD"===n.status},H=function n(r,t){void 0===t&&(t=[]);try{return Promise.resolve(function(s,u){try{var a=Promise.resolve(r).then(function(s){if(r=function(n){for(var r=0,t=Object.keys(n);r<t.length;r++){var o=t[r];if(!e.has(o))throw new Error('"'+o+'" is an invalid root level Interaction property.')}return n}(s),b(r))throw new Error("Interaction Error: "+r.reason);if(!t.length)return r;var u=t[0],a=t.slice(1);return Promise.resolve(u).then(function(e){if("function"==typeof e)return n(e(r),a);if(o(e)||!e)return n(r,a);if(i(e))return n(e,a);throw new Error("Invalid Interaction Composition")})})}catch(n){return u(n)}return a&&a.then?a.then(void 0,u):a}(0,function(n){throw n}))}catch(n){return Promise.reject(n)}},w=function n(){for(var r=arguments.length,e=new Array(r),o=0;o<r;o++)e[o]=arguments[o];var s=e[0],u=e[1];return t(s)&&null==u?function(r){return n(r,s)}:H(s,u)},D=function(n){return n};exports.ACCOUNT="ACCOUNT",exports.ARGUMENT="ARGUMENT",exports.BAD="BAD",exports.Bad=function(n,r){return n.status="BAD",n.reason=r,n},exports.GET_ACCOUNT="GET_ACCOUNT",exports.GET_BLOCK="GET_BLOCK",exports.GET_BLOCK_BY_HEIGHT="GET_BLOCK_BY_HEIGHT",exports.GET_BLOCK_BY_ID="GET_BLOCK_BY_ID",exports.GET_BLOCK_HEADER="GET_BLOCK_HEADER",exports.GET_EVENTS="GET_EVENTS",exports.GET_LATEST_BLOCK="GET_LATEST_BLOCK",exports.GET_TRANSACTION="GET_TRANSACTION",exports.GET_TRANSACTION_STATUS="GET_TRANSACTION_STATUS",exports.OK="OK",exports.Ok=l,exports.PARAM="PARAM",exports.PING="PING",exports.SCRIPT="SCRIPT",exports.TRANSACTION="TRANSACTION",exports.UNKNOWN="UNKNOWN",exports.destroy=function(n){return function(r){return delete r.assigns[n],l(r)}},exports.get=function(n,r,e){return null==n.assigns[r]?e:n.assigns[r]},exports.interaction=function(){return JSON.parse(r)},exports.isAccount=function(n){return"ACCOUNT"===n.kind},exports.isArgument=function(n){return"ARGUMENT"===n.kind},exports.isBad=b,exports.isGetAccount=v,exports.isGetBlock=R,exports.isGetBlockByHeight=L,exports.isGetBlockById=K,exports.isGetBlockHeader=U,exports.isGetEvents=I,exports.isGetLatestBlock=h,exports.isGetTransactionStatus=B,exports.isInteraction=i,exports.isOk=function(n){return"OK"===n.status},exports.isParam=function(n){return"PARAM"===n.kind},exports.isPing=P,exports.isScript=k,exports.isTransaction=C,exports.isUnknown=g,exports.makeArgument=function(n){return function(r){var e=a();return r.message.arguments.push(e),r.arguments[e]=JSON.parse('{\n  "kind":"ARGUMENT",\n  "tempId":null,\n  "value":null,\n  "asArgument":null,\n  "xform":null,\n  "resolve": null\n}'),r.arguments[e].tempId=e,r.arguments[e].value=n.value,r.arguments[e].asArgument=n.asArgument,r.arguments[e].xform=n.xform,r.arguments[e].resolve=n.resolve,l(r)}},exports.makeAuthorizer=function(n){return function(r){var e=a();return r.authorizations.push(e),l(w(r,[p(n,e)]))}},exports.makeGetAccount=A,exports.makeGetBlock=y,exports.makeGetBlockByHeight=_,exports.makeGetBlockById=G,exports.makeGetBlockHeader=S,exports.makeGetEvents=E,exports.makeGetLatestBlock=N,exports.makeGetTransactionStatus=x,exports.makeParam=function(n){return function(r){var e=a();return r.message.params.push(e),r.params[e]=JSON.parse('{\n  "kind":"PARAM",\n  "tempId":null,\n  "key":null,\n  "value":null,\n  "asParam":null,\n  "xform":null,\n  "resolve": null\n}'),r.params[e].tempId=e,r.params[e].key=n.key,r.params[e].value=n.value,r.params[e].asParam=n.asParam,r.params[e].xform=n.xform,r.params[e].resolve=n.resolve,l(r)}},exports.makePayer=function(n){return function(r){var e=a();return r.payer=e,l(w(r,[p(n,e)]))}},exports.makePing=O,exports.makeProposer=function(n){return function(r){var e=a();return r.proposer=e,l(w(r,[p(n,e)]))}},exports.makeScript=m,exports.makeTransaction=f,exports.makeUnknown=T,exports.pipe=w,exports.put=function(n,r){return function(e){return e.assigns[n]=r,l(e)}},exports.update=function(n,r){return void 0===r&&(r=D),function(e){return e.assigns[n]=r(e.assigns[n],e),l(e)}},exports.uuid=a,exports.why=function(n){return n.reason};
//# sourceMappingURL=interaction.js.map
