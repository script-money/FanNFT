function n(){return(n=Object.assign||function(n){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(n[e]=t[e])}return n}).apply(this,arguments)}"undefined"!=typeof Symbol&&(Symbol.iterator||(Symbol.iterator=Symbol("Symbol.iterator"))),"undefined"!=typeof Symbol&&(Symbol.asyncIterator||(Symbol.asyncIterator=Symbol("Symbol.asyncIterator")));var r="UNKNOWN",t="SCRIPT",e="TRANSACTION",u="GET_TRANSACTION_STATUS",o="GET_ACCOUNT",a="GET_EVENTS",s="GET_LATEST_BLOCK",l="PING",i="GET_TRANSACTION",c="GET_BLOCK_BY_ID",f="GET_BLOCK_BY_HEIGHT",T="GET_BLOCK",m="GET_BLOCK_HEADER",p="BAD",A="OK",E="ACCOUNT",N="PARAM",O="ARGUMENT",_='{\n  "tag":"UNKNOWN",\n  "assigns":{},\n  "status":"OK",\n  "reason":null,\n  "accounts":{},\n  "params":{},\n  "arguments":{},\n  "message": {\n    "cadence":null,\n    "refBlock":null,\n    "computLimit":null,\n    "proposer":null,\n    "payer":null,\n    "authorizations":[],\n    "params":[],\n    "arguments":[]\n  },\n  "proposer":null,\n  "authorizations":[],\n  "payer":null,\n  "events": {\n    "eventType":null,\n    "start":null,\n    "end":null,\n    "blockIds":[]\n  },\n  "transaction": {\n    "id":null\n  },\n  "block": {\n    "id":null,\n    "height":null,\n    "isSealed":null\n  },\n  "account": {\n    "addr":null\n  }\n}',v=new Set(Object.keys(JSON.parse(_))),y=function(){return JSON.parse(_)},g=function(n){return Array.isArray(n)},d=function(n){return null==n},S="abcdefghijklmnopqrstuvwxyz0123456789".split(""),C=function(){return S[~~(Math.random()*S.length)]},I=function(){return Array.from({length:10},C).join("")},G=function(n){if("object"!=typeof n||d(n)||function(n){return"number"===n}(n))return!1;var r=v,t=Array.isArray(r),e=0;for(r=t?r:r[Symbol.iterator]();;){var u;if(t){if(e>=r.length)break;u=r[e++]}else{if((e=r.next()).done)break;u=e.value}if(!n.hasOwnProperty(u))return!1}return!0},h=function(n){return n.status="OK",n},B=function(n,r){return n.status="BAD",n.reason=r,n},K=function(n){return function(r){return r.tag=n,h(r)}},b=function(r,t){return function(e){return e.accounts[t]=JSON.parse('{\n  "kind":"ACCOUNT",\n  "tempId":null,\n  "addr":null,\n  "keyId":null,\n  "sequenceNum":null,\n  "signature":null,\n  "signingFunction":null,\n  "resolve":null,\n  "role": {\n    "proposer":false,\n    "authorizer":false,\n    "payer":false,\n    "param":false\n  }\n}'),e.accounts[t].tempId=t,e.accounts[t].addr=r.addr,e.accounts[t].keyId=r.keyId,e.accounts[t].sequenceNum=r.sequenceNum,e.accounts[t].signature=r.signature,e.accounts[t].signingFunction=r.signingFunction,e.accounts[t].resolve=r.resolve,e.accounts[t].role=n({},e.accounts[t].role,{},r.role),h(e)}},k=function(n){return function(r){var t=I();return r.authorizations.push(t),h(En(r,[b(n,t)]))}},L=function(n){return function(r){var t=I();return r.proposer=t,h(En(r,[b(n,t)]))}},R=function(n){return function(r){var t=I();return r.payer=t,h(En(r,[b(n,t)]))}},P=function(n){return function(r){var t=I();return r.message.params.push(t),r.params[t]=JSON.parse('{\n  "kind":"PARAM",\n  "tempId":null,\n  "key":null,\n  "value":null,\n  "asParam":null,\n  "xform":null,\n  "resolve": null\n}'),r.params[t].tempId=t,r.params[t].key=n.key,r.params[t].value=n.value,r.params[t].asParam=n.asParam,r.params[t].xform=n.xform,r.params[t].resolve=n.resolve,h(r)}},U=function(n){return function(r){var t=I();return r.message.arguments.push(t),r.arguments[t]=JSON.parse('{\n  "kind":"ARGUMENT",\n  "tempId":null,\n  "value":null,\n  "asArgument":null,\n  "xform":null,\n  "resolve": null\n}'),r.arguments[t].tempId=t,r.arguments[t].value=n.value,r.arguments[t].asArgument=n.asArgument,r.arguments[t].xform=n.xform,r.arguments[t].resolve=n.resolve,h(r)}},w=K("UNKNOWN"),x=K("SCRIPT"),D=K("TRANSACTION"),H=K("GET_TRANSACTION_STATUS"),j=K("GET_ACCOUNT"),M=K("GET_EVENTS"),Y=K("GET_LATEST_BLOCK"),z=K("GET_BLOCK_BY_ID"),J=K("GET_BLOCK_BY_HEIGHT"),q=K("PING"),W=K("GET_BLOCK"),F=K("GET_BLOCK_HEADER"),V=function(n){return function(r){return r.tag===n}},Q=V("UNKNOWN"),X=V("SCRIPT"),Z=V("TRANSACTION"),$=V("GET_TRANSACTION_STATUS"),nn=V("GET_ACCOUNT"),rn=V("GET_EVENTS"),tn=V("GET_LATEST_BLOCK"),en=V("GET_BLOCK_BY_ID"),un=V("GET_BLOCK_BY_HEIGHT"),on=V("PING"),an=V("GET_BLOCK"),sn=V("GET_BLOCK_HEADER"),ln=function(n){return"OK"===n.status},cn=function(n){return"BAD"===n.status},fn=function(n){return n.reason},Tn=function(n){return"ACCOUNT"===n.kind},mn=function(n){return"PARAM"===n.kind},pn=function(n){return"ARGUMENT"===n.kind},An=function n(r,t){void 0===t&&(t=[]);try{return Promise.resolve(function(e,u){try{var o=Promise.resolve(r).then(function(e){if(r=function(n){for(var r=0,t=Object.keys(n);r<t.length;r++){var e=t[r];if(!v.has(e))throw new Error('"'+e+'" is an invalid root level Interaction property.')}return n}(e),cn(r))throw new Error("Interaction Error: "+r.reason);if(!t.length)return r;var u=t[0],o=t.slice(1);return Promise.resolve(u).then(function(t){if("function"==typeof t)return n(t(r),o);if(d(t)||!t)return n(r,o);if(G(t))return n(t,o);throw new Error("Invalid Interaction Composition")})})}catch(n){return u(n)}return o&&o.then?o.then(void 0,u):o}(0,function(n){throw n}))}catch(n){return Promise.reject(n)}},En=function n(){for(var r=arguments.length,t=new Array(r),e=0;e<r;e++)t[e]=arguments[e];var u=t[0],o=t[1];return g(u)&&null==o?function(r){return n(r,u)}:An(u,o)},Nn=function(n){return n},On=function(n,r,t){return null==n.assigns[r]?t:n.assigns[r]},_n=function(n,r){return function(t){return t.assigns[n]=r,h(t)}},vn=function(n,r){return void 0===r&&(r=Nn),function(t){return t.assigns[n]=r(t.assigns[n],t),h(t)}},yn=function(n){return function(r){return delete r.assigns[n],h(r)}};export{E as ACCOUNT,O as ARGUMENT,p as BAD,B as Bad,o as GET_ACCOUNT,T as GET_BLOCK,f as GET_BLOCK_BY_HEIGHT,c as GET_BLOCK_BY_ID,m as GET_BLOCK_HEADER,a as GET_EVENTS,s as GET_LATEST_BLOCK,i as GET_TRANSACTION,u as GET_TRANSACTION_STATUS,A as OK,h as Ok,N as PARAM,l as PING,t as SCRIPT,e as TRANSACTION,r as UNKNOWN,yn as destroy,On as get,y as interaction,Tn as isAccount,pn as isArgument,cn as isBad,nn as isGetAccount,an as isGetBlock,un as isGetBlockByHeight,en as isGetBlockById,sn as isGetBlockHeader,rn as isGetEvents,tn as isGetLatestBlock,$ as isGetTransactionStatus,G as isInteraction,ln as isOk,mn as isParam,on as isPing,X as isScript,Z as isTransaction,Q as isUnknown,U as makeArgument,k as makeAuthorizer,j as makeGetAccount,W as makeGetBlock,J as makeGetBlockByHeight,z as makeGetBlockById,F as makeGetBlockHeader,M as makeGetEvents,Y as makeGetLatestBlock,H as makeGetTransactionStatus,P as makeParam,R as makePayer,q as makePing,L as makeProposer,x as makeScript,D as makeTransaction,w as makeUnknown,En as pipe,_n as put,vn as update,I as uuid,fn as why};
//# sourceMappingURL=interaction.module.js.map
