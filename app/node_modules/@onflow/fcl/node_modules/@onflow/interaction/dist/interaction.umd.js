!function(n,r){"object"==typeof exports&&"undefined"!=typeof module?r(exports):"function"==typeof define&&define.amd?define(["exports"],r):r((n=n||self).interaction={})}(this,function(n){function r(){return(r=Object.assign||function(n){for(var r=1;r<arguments.length;r++){var e=arguments[r];for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(n[t]=e[t])}return n}).apply(this,arguments)}"undefined"!=typeof Symbol&&(Symbol.iterator||(Symbol.iterator=Symbol("Symbol.iterator"))),"undefined"!=typeof Symbol&&(Symbol.asyncIterator||(Symbol.asyncIterator=Symbol("Symbol.asyncIterator")));var e='{\n  "tag":"UNKNOWN",\n  "assigns":{},\n  "status":"OK",\n  "reason":null,\n  "accounts":{},\n  "params":{},\n  "arguments":{},\n  "message": {\n    "cadence":null,\n    "refBlock":null,\n    "computLimit":null,\n    "proposer":null,\n    "payer":null,\n    "authorizations":[],\n    "params":[],\n    "arguments":[]\n  },\n  "proposer":null,\n  "authorizations":[],\n  "payer":null,\n  "events": {\n    "eventType":null,\n    "start":null,\n    "end":null,\n    "blockIds":[]\n  },\n  "transaction": {\n    "id":null\n  },\n  "block": {\n    "id":null,\n    "height":null,\n    "isSealed":null\n  },\n  "account": {\n    "addr":null\n  }\n}',t=new Set(Object.keys(JSON.parse(e))),u=function(n){return Array.isArray(n)},a=function(n){return null==n},o="abcdefghijklmnopqrstuvwxyz0123456789".split(""),s=function(){return o[~~(Math.random()*o.length)]},i=function(){return Array.from({length:10},s).join("")},l=function(n){if("object"!=typeof n||a(n)||function(n){return"number"===n}(n))return!1;var r=t,e=Array.isArray(r),u=0;for(r=e?r:r[Symbol.iterator]();;){var o;if(e){if(u>=r.length)break;o=r[u++]}else{if((u=r.next()).done)break;o=u.value}if(!n.hasOwnProperty(o))return!1}return!0},c=function(n){return n.status="OK",n},T=function(n){return function(r){return r.tag=n,c(r)}},f=function(n,e){return function(t){return t.accounts[e]=JSON.parse('{\n  "kind":"ACCOUNT",\n  "tempId":null,\n  "addr":null,\n  "keyId":null,\n  "sequenceNum":null,\n  "signature":null,\n  "signingFunction":null,\n  "resolve":null,\n  "role": {\n    "proposer":false,\n    "authorizer":false,\n    "payer":false,\n    "param":false\n  }\n}'),t.accounts[e].tempId=e,t.accounts[e].addr=n.addr,t.accounts[e].keyId=n.keyId,t.accounts[e].sequenceNum=n.sequenceNum,t.accounts[e].signature=n.signature,t.accounts[e].signingFunction=n.signingFunction,t.accounts[e].resolve=n.resolve,t.accounts[e].role=r({},t.accounts[e].role,{},n.role),c(t)}},m=T("UNKNOWN"),A=T("SCRIPT"),E=T("TRANSACTION"),p=T("GET_TRANSACTION_STATUS"),N=T("GET_ACCOUNT"),G=T("GET_EVENTS"),_=T("GET_LATEST_BLOCK"),O=T("GET_BLOCK_BY_ID"),d=T("GET_BLOCK_BY_HEIGHT"),y=T("PING"),S=T("GET_BLOCK"),g=T("GET_BLOCK_HEADER"),k=function(n){return function(r){return r.tag===n}},C=k("UNKNOWN"),B=k("SCRIPT"),v=k("TRANSACTION"),I=k("GET_TRANSACTION_STATUS"),h=k("GET_ACCOUNT"),K=k("GET_EVENTS"),L=k("GET_LATEST_BLOCK"),P=k("GET_BLOCK_BY_ID"),R=k("GET_BLOCK_BY_HEIGHT"),b=k("PING"),U=k("GET_BLOCK"),H=k("GET_BLOCK_HEADER"),w=function(n){return"BAD"===n.status},D=function n(r,e){void 0===e&&(e=[]);try{return Promise.resolve(function(u,o){try{var s=Promise.resolve(r).then(function(u){if(r=function(n){for(var r=0,e=Object.keys(n);r<e.length;r++){var u=e[r];if(!t.has(u))throw new Error('"'+u+'" is an invalid root level Interaction property.')}return n}(u),w(r))throw new Error("Interaction Error: "+r.reason);if(!e.length)return r;var o=e[0],s=e.slice(1);return Promise.resolve(o).then(function(e){if("function"==typeof e)return n(e(r),s);if(a(e)||!e)return n(r,s);if(l(e))return n(e,s);throw new Error("Invalid Interaction Composition")})})}catch(n){return o(n)}return s&&s.then?s.then(void 0,o):s}(0,function(n){throw n}))}catch(n){return Promise.reject(n)}},x=function n(){for(var r=arguments.length,e=new Array(r),t=0;t<r;t++)e[t]=arguments[t];var a=e[0],o=e[1];return u(a)&&null==o?function(r){return n(r,a)}:D(a,o)},j=function(n){return n};n.ACCOUNT="ACCOUNT",n.ARGUMENT="ARGUMENT",n.BAD="BAD",n.Bad=function(n,r){return n.status="BAD",n.reason=r,n},n.GET_ACCOUNT="GET_ACCOUNT",n.GET_BLOCK="GET_BLOCK",n.GET_BLOCK_BY_HEIGHT="GET_BLOCK_BY_HEIGHT",n.GET_BLOCK_BY_ID="GET_BLOCK_BY_ID",n.GET_BLOCK_HEADER="GET_BLOCK_HEADER",n.GET_EVENTS="GET_EVENTS",n.GET_LATEST_BLOCK="GET_LATEST_BLOCK",n.GET_TRANSACTION="GET_TRANSACTION",n.GET_TRANSACTION_STATUS="GET_TRANSACTION_STATUS",n.OK="OK",n.Ok=c,n.PARAM="PARAM",n.PING="PING",n.SCRIPT="SCRIPT",n.TRANSACTION="TRANSACTION",n.UNKNOWN="UNKNOWN",n.destroy=function(n){return function(r){return delete r.assigns[n],c(r)}},n.get=function(n,r,e){return null==n.assigns[r]?e:n.assigns[r]},n.interaction=function(){return JSON.parse(e)},n.isAccount=function(n){return"ACCOUNT"===n.kind},n.isArgument=function(n){return"ARGUMENT"===n.kind},n.isBad=w,n.isGetAccount=h,n.isGetBlock=U,n.isGetBlockByHeight=R,n.isGetBlockById=P,n.isGetBlockHeader=H,n.isGetEvents=K,n.isGetLatestBlock=L,n.isGetTransactionStatus=I,n.isInteraction=l,n.isOk=function(n){return"OK"===n.status},n.isParam=function(n){return"PARAM"===n.kind},n.isPing=b,n.isScript=B,n.isTransaction=v,n.isUnknown=C,n.makeArgument=function(n){return function(r){var e=i();return r.message.arguments.push(e),r.arguments[e]=JSON.parse('{\n  "kind":"ARGUMENT",\n  "tempId":null,\n  "value":null,\n  "asArgument":null,\n  "xform":null,\n  "resolve": null\n}'),r.arguments[e].tempId=e,r.arguments[e].value=n.value,r.arguments[e].asArgument=n.asArgument,r.arguments[e].xform=n.xform,r.arguments[e].resolve=n.resolve,c(r)}},n.makeAuthorizer=function(n){return function(r){var e=i();return r.authorizations.push(e),c(x(r,[f(n,e)]))}},n.makeGetAccount=N,n.makeGetBlock=S,n.makeGetBlockByHeight=d,n.makeGetBlockById=O,n.makeGetBlockHeader=g,n.makeGetEvents=G,n.makeGetLatestBlock=_,n.makeGetTransactionStatus=p,n.makeParam=function(n){return function(r){var e=i();return r.message.params.push(e),r.params[e]=JSON.parse('{\n  "kind":"PARAM",\n  "tempId":null,\n  "key":null,\n  "value":null,\n  "asParam":null,\n  "xform":null,\n  "resolve": null\n}'),r.params[e].tempId=e,r.params[e].key=n.key,r.params[e].value=n.value,r.params[e].asParam=n.asParam,r.params[e].xform=n.xform,r.params[e].resolve=n.resolve,c(r)}},n.makePayer=function(n){return function(r){var e=i();return r.payer=e,c(x(r,[f(n,e)]))}},n.makePing=y,n.makeProposer=function(n){return function(r){var e=i();return r.proposer=e,c(x(r,[f(n,e)]))}},n.makeScript=A,n.makeTransaction=E,n.makeUnknown=m,n.pipe=x,n.put=function(n,r){return function(e){return e.assigns[n]=r,c(e)}},n.update=function(n,r){return void 0===r&&(r=j),function(e){return e.assigns[n]=r(e.assigns[n],e),c(e)}},n.uuid=i,n.why=function(n){return n.reason}});
//# sourceMappingURL=interaction.umd.js.map
