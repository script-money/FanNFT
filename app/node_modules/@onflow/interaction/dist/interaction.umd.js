!function(n,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((n=n||self).interaction={})}(this,function(n){function e(){return(e=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var t in r)Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}return n}).apply(this,arguments)}function r(n,e){(null==e||e>n.length)&&(e=n.length);for(var r=0,t=new Array(e);r<e;r++)t[r]=n[r];return t}var t='{\n  "tag":1,\n  "assigns":{},\n  "status":2,\n  "reason":null,\n  "accounts":{},\n  "params":{},\n  "arguments":{},\n  "message": {\n    "cadence":null,\n    "refBlock":null,\n    "computLimit":null,\n    "proposer":null,\n    "payer":null,\n    "authorizations":[],\n    "params":[],\n    "arguments":[]\n  },\n  "proposer":null,\n  "authorizations":[],\n  "payer":null,\n  "events": {\n    "eventType":null,\n    "start":null,\n    "end":null\n  },\n  "latestBlock": {\n    "isSealed":null\n  },\n  "block": {\n    "isSealed":null,\n    "id":null,\n    "height":null\n  },\n  "accountAddr":null,\n  "transactionId":null\n}',u=new Set(Object.keys(JSON.parse(t))),a=function(n){return Array.isArray(n)},o=function(n){return null==n},i="abcdefghijklmnopqrstuvwxyz0123456789".split(""),s=function(){return i[~~(Math.random()*i.length)]},l=function(){return Array.from({length:10},s).join("")},c=function(n){if("object"!=typeof n||o(n)||function(n){return"number"===n}(n))return!1;for(var e,t=function(n,e){var t;if("undefined"==typeof Symbol||null==n[Symbol.iterator]){if(Array.isArray(n)||(t=function(n,e){if(n){if("string"==typeof n)return r(n,void 0);var t=Object.prototype.toString.call(n).slice(8,-1);return"Object"===t&&n.constructor&&(t=n.constructor.name),"Map"===t||"Set"===t?Array.from(n):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?r(n,void 0):void 0}}(n))){t&&(n=t);var u=0;return function(){return u>=n.length?{done:!0}:{done:!1,value:n[u++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(t=n[Symbol.iterator]()).next.bind(t)}(u);!(e=t()).done;)if(!n.hasOwnProperty(e.value))return!1;return!0},f=function(n){return n.status=2,n},m=function(n){return function(e){return e.tag=n,f(e)}},p=function(n,r){return function(t){return t.accounts[r]=JSON.parse('{\n  "kind":1,\n  "tempId":null,\n  "addr":null,\n  "keyId":null,\n  "sequenceNum":null,\n  "signature":null,\n  "signingFunction":null,\n  "resolve":null,\n  "role": {\n    "proposer":false,\n    "authorizer":false,\n    "payer":false,\n    "param":false\n  }\n}'),t.accounts[r].tempId=r,t.accounts[r].addr=n.addr,t.accounts[r].keyId=n.keyId,t.accounts[r].sequenceNum=n.sequenceNum,t.accounts[r].signature=n.signature,t.accounts[r].signingFunction=n.signingFunction,t.accounts[r].resolve=n.resolve,t.accounts[r].role=e({},t.accounts[r].role,n.role),f(t)}},d=m(1),g=m(2),v=m(4),y=m(8),k=m(16),h=m(32),A=m(64),B=m(256),T=m(512),I=m(128),S=function(n){return function(e){return Boolean(e.tag&n)}},O=S(1),G=S(2),b=S(4),N=S(8),P=S(16),E=S(32),w=S(64),j=S(256),C=S(512),_=S(128),x=function(n){return Boolean(1&n.status)},U=function n(e,r){void 0===r&&(r=[]);try{return Promise.resolve(e).then(function(t){if(e=function(n){for(var e=0,r=Object.keys(n);e<r.length;e++){var t=r[e];if(!u.has(t))throw new Error('"'+t+'" is an invalid root level Interaction property.')}return n}(t),x(e)||!r.length)return e;var a=r[0],i=r.slice(1);return Promise.resolve(a).then(function(r){if("function"==typeof r)return n(r(e),i);if(o(r)||!r)return n(e,i);if(c(r))return n(r,i);throw new Error("Invalid Interaction Composition")})})}catch(n){return Promise.reject(n)}},L=function n(){var e=[].slice.call(arguments),r=e[0],t=e[1];return a(r)&&null==t?function(e){return n(e,r)}:U(r,t)},z=function(n){return n};n.ACCOUNT=1,n.ARGUMENT=4,n.BAD=1,n.Bad=function(n,e){return n.status=1,n.reason=e,n},n.GET_ACCOUNT=16,n.GET_BLOCK_BY_HEIGHT=512,n.GET_BLOCK_BY_ID=256,n.GET_EVENTS=32,n.GET_LATEST_BLOCK=64,n.GET_TRANSACTION_STATUS=8,n.OK=2,n.Ok=f,n.PARAM=2,n.PING=128,n.SCRIPT=2,n.TRANSACTION=4,n.UNKNOWN=1,n.destroy=function(n){return function(e){return delete e.assigns[n],f(e)}},n.get=function(n,e,r){return null==n.assigns[e]?r:n.assigns[e]},n.interaction=function(){return JSON.parse(t)},n.isAccount=function(n){return Boolean(1&n.kind)},n.isArgument=function(n){return Boolean(4&n.kind)},n.isBad=x,n.isGetAccount=P,n.isGetBlockByHeight=C,n.isGetBlockById=j,n.isGetEvents=E,n.isGetLatestBlock=w,n.isGetTransactionStatus=N,n.isInteraction=c,n.isOk=function(n){return Boolean(2&n.status)},n.isParam=function(n){return Boolean(2&n.kind)},n.isPing=_,n.isScript=G,n.isTransaction=b,n.isUnknown=O,n.makeArgument=function(n){return function(e){var r=l();return e.message.arguments.push(r),e.arguments[r]=JSON.parse('{\n  "kind":4,\n  "tempId":null,\n  "value":null,\n  "asArgument":null,\n  "xform":null,\n  "resolve": null\n}'),e.arguments[r].tempId=r,e.arguments[r].value=n.value,e.arguments[r].asArgument=n.asArgument,e.arguments[r].xform=n.xform,e.arguments[r].resolve=n.resolve,f(e)}},n.makeAuthorizer=function(n){return function(e){var r=l();return e.authorizations.push(r),f(L(e,[p(n,r)]))}},n.makeGetAccount=k,n.makeGetBlockByHeight=T,n.makeGetBlockById=B,n.makeGetEvents=h,n.makeGetLatestBlock=A,n.makeGetTransactionStatus=y,n.makeParam=function(n){return function(e){var r=l();return e.message.params.push(r),e.params[r]=JSON.parse('{\n  "kind":2,\n  "tempId":null,\n  "key":null,\n  "value":null,\n  "asParam":null,\n  "xform":null,\n  "resolve": null\n}'),e.params[r].tempId=r,e.params[r].key=n.key,e.params[r].value=n.value,e.params[r].asParam=n.asParam,e.params[r].xform=n.xform,e.params[r].resolve=n.resolve,f(e)}},n.makePayer=function(n){return function(e){var r=l();return e.payer=r,f(L(e,[p(n,r)]))}},n.makePing=I,n.makeProposer=function(n){return function(e){var r=l();return e.proposer=r,f(L(e,[p(n,r)]))}},n.makeScript=g,n.makeTransaction=v,n.makeUnknown=d,n.pipe=L,n.put=function(n,e){return function(r){return r.assigns[n]=e,f(r)}},n.update=function(n,e){return void 0===e&&(e=z),function(r){return r.assigns[n]=e(r.assigns[n],r),f(r)}},n.uuid=l,n.why=function(n){return n.reason}});
//# sourceMappingURL=interaction.umd.js.map
